{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport { StatusBar } from 'expo-status-bar';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\nimport { Provider } from 'react-redux';\nimport { store } from \"./src/redux/store\";\nimport AppNavigator from \"./src/navigation/AppNavigator\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { loginSuccess } from \"./src/redux/slices/authSlice\";\nimport apiService from \"./src/api/apiService\";\nimport SplashScreen from \"./src/screens/SplashScreen\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function App() {\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setIsLoading = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    error = _useState4[0],\n    setError = _useState4[1];\n  useEffect(function () {\n    var checkLoginStatus = function () {\n      var _ref = _asyncToGenerator(function* () {\n        try {\n          var token = yield AsyncStorage.getItem('token');\n          if (token) {\n            var user = {\n              id: '1',\n              name: 'John Doe',\n              email: 'john.doe@example.com'\n            };\n            store.dispatch(loginSuccess(user));\n          }\n        } catch (error) {\n          console.error('Error checking login status:', error);\n        }\n      });\n      return function checkLoginStatus() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    checkLoginStatus();\n    var preloadData = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          yield apiService.getHotels();\n          yield apiService.getShortVideos();\n          setIsLoading(false);\n        } catch (err) {\n          console.error('Error preloading data:', err);\n          setError(err.message);\n          setIsLoading(false);\n        }\n      });\n      return function preloadData() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    preloadData();\n  }, []);\n  if (isLoading) {\n    return _jsx(SplashScreen, {});\n  }\n  if (error) {\n    return null;\n  }\n  return _jsx(Provider, {\n    store: store,\n    children: _jsxs(SafeAreaProvider, {\n      children: [_jsx(AppNavigator, {}), _jsx(StatusBar, {\n        style: \"auto\"\n      })]\n    })\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","StatusBar","SafeAreaProvider","Provider","store","AppNavigator","AsyncStorage","loginSuccess","apiService","SplashScreen","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","error","setError","checkLoginStatus","_ref","_asyncToGenerator","token","getItem","user","id","name","email","dispatch","console","apply","arguments","preloadData","_ref2","getHotels","getShortVideos","err","message","children","style"],"sources":["/Users/huynhquochieu/SWINBURNE/LAB/hotel-booking-app/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { StatusBar } from 'expo-status-bar';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\nimport { Provider } from 'react-redux';\nimport { store } from './src/redux/store';\nimport AppNavigator from './src/navigation/AppNavigator';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { loginSuccess } from './src/redux/slices/authSlice';\nimport apiService from './src/api/apiService';\nimport SplashScreen from './src/screens/SplashScreen';\n\nexport default function App() {\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    // Check if user is already logged in\n    const checkLoginStatus = async () => {\n      try {\n        const token = await AsyncStorage.getItem('token');\n        if (token) {\n          // In a real app, you would validate the token with your backend\n          // For now, we'll just simulate a user being logged in\n          const user = {\n            id: '1',\n            name: 'John Doe',\n            email: 'john.doe@example.com',\n          };\n          store.dispatch(loginSuccess(user));\n        }\n      } catch (error) {\n        console.error('Error checking login status:', error);\n      }\n    };\n\n    checkLoginStatus();\n    \n    const preloadData = async () => {\n      try {\n        // Preload hotels data\n        await apiService.getHotels();\n        // Preload videos data\n        await apiService.getShortVideos();\n        setIsLoading(false);\n      } catch (err) {\n        console.error('Error preloading data:', err);\n        setError(err.message);\n        setIsLoading(false);\n      }\n    };\n    \n    preloadData();\n  }, []);\n\n  if (isLoading) {\n    return <SplashScreen />;\n  }\n\n  if (error) {\n    return null; // Or an error screen component\n  }\n\n  return (\n    <Provider store={store}>\n      <SafeAreaProvider>\n        <AppNavigator />\n        <StatusBar style=\"auto\" />\n      </SafeAreaProvider>\n    </Provider>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,gBAAgB,QAAQ,gCAAgC;AACjE,SAASC,QAAQ,QAAQ,aAAa;AACtC,SAASC,KAAK;AACd,OAAOC,YAAY;AACnB,OAAOC,YAAY,MAAM,2CAA2C;AACpE,SAASC,YAAY;AACrB,OAAOC,UAAU;AACjB,OAAOC,YAAY;AAAmC,SAAAC,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA;AAEtD,eAAe,SAASC,GAAGA,CAAA,EAAG;EAC5B,IAAAC,SAAA,GAAkCf,QAAQ,CAAC,IAAI,CAAC;IAAAgB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAzCG,SAAS,GAAAF,UAAA;IAAEG,YAAY,GAAAH,UAAA;EAC9B,IAAAI,UAAA,GAA0BpB,QAAQ,CAAC,IAAI,CAAC;IAAAqB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAAjCE,KAAK,GAAAD,UAAA;IAAEE,QAAQ,GAAAF,UAAA;EAEtBtB,SAAS,CAAC,YAAM;IAEd,IAAMyB,gBAAgB;MAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,aAAY;QACnC,IAAI;UACF,IAAMC,KAAK,SAASrB,YAAY,CAACsB,OAAO,CAAC,OAAO,CAAC;UACjD,IAAID,KAAK,EAAE;YAGT,IAAME,IAAI,GAAG;cACXC,EAAE,EAAE,GAAG;cACPC,IAAI,EAAE,UAAU;cAChBC,KAAK,EAAE;YACT,CAAC;YACD5B,KAAK,CAAC6B,QAAQ,CAAC1B,YAAY,CAACsB,IAAI,CAAC,CAAC;UACpC;QACF,CAAC,CAAC,OAAOP,KAAK,EAAE;UACdY,OAAO,CAACZ,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;QACtD;MACF,CAAC;MAAA,gBAhBKE,gBAAgBA,CAAA;QAAA,OAAAC,IAAA,CAAAU,KAAA,OAAAC,SAAA;MAAA;IAAA,GAgBrB;IAEDZ,gBAAgB,CAAC,CAAC;IAElB,IAAMa,WAAW;MAAA,IAAAC,KAAA,GAAAZ,iBAAA,CAAG,aAAY;QAC9B,IAAI;UAEF,MAAMlB,UAAU,CAAC+B,SAAS,CAAC,CAAC;UAE5B,MAAM/B,UAAU,CAACgC,cAAc,CAAC,CAAC;UACjCrB,YAAY,CAAC,KAAK,CAAC;QACrB,CAAC,CAAC,OAAOsB,GAAG,EAAE;UACZP,OAAO,CAACZ,KAAK,CAAC,wBAAwB,EAAEmB,GAAG,CAAC;UAC5ClB,QAAQ,CAACkB,GAAG,CAACC,OAAO,CAAC;UACrBvB,YAAY,CAAC,KAAK,CAAC;QACrB;MACF,CAAC;MAAA,gBAZKkB,WAAWA,CAAA;QAAA,OAAAC,KAAA,CAAAH,KAAA,OAAAC,SAAA;MAAA;IAAA,GAYhB;IAEDC,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,EAAE,CAAC;EAEN,IAAInB,SAAS,EAAE;IACb,OAAOP,IAAA,CAACF,YAAY,IAAE,CAAC;EACzB;EAEA,IAAIa,KAAK,EAAE;IACT,OAAO,IAAI;EACb;EAEA,OACEX,IAAA,CAACR,QAAQ;IAACC,KAAK,EAAEA,KAAM;IAAAuC,QAAA,EACrB9B,KAAA,CAACX,gBAAgB;MAAAyC,QAAA,GACfhC,IAAA,CAACN,YAAY,IAAE,CAAC,EAChBM,IAAA,CAACV,SAAS;QAAC2C,KAAK,EAAC;MAAM,CAAE,CAAC;IAAA,CACV;EAAC,CACX,CAAC;AAEf","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}